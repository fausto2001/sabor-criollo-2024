<ion-content [fullscreen]="true">
  <ion-header [translucent]="true">
    <ion-toolbar>
      <ion-title class="titulo">ENCUESTA</ion-title>
      <div class="divSalir" (click)="goHome()">
        <ion-img src="../../../assets/botones/back.svg" class="back"></ion-img>
      </div>
    </ion-toolbar>
  </ion-header>

  <ion-row>
    <form [formGroup]="form" class="auth-form" (ngSubmit)="registrarEncuesta()">
      <ion-row class="ion-justify-content-center slot aux">
        <ion-card [class.error-card]="form.controls['opinion'].invalid && (enviado || form.controls['opinion'].dirty)">
          <ion-card-header>
            <ion-card-title>Puntaje del establecimiento</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-item>
              <ion-icon name="thumbs-up-outline"></ion-icon>
              <ion-range formControlName="puntaje" min="1" max="10" step="1" snaps="true" ticks="true" (ionChange)="onPuntajeChange($event)">
              </ion-range>
              <ion-icon name="thumbs-down-outline"></ion-icon>
            </ion-item>
          </ion-card-content>
        </ion-card>

        <ion-card>
          <ion-card-header>
            <ion-card-title>¿Mesa ordenada?</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-item lines="none">
              <ion-label style="width:auto">Seleccionar si la mesa estaba ordenada.</ion-label>

              <ion-checkbox slot="end" formControlName="mesaOrdenada" (ionChange)="onCheckboxChange($event)"></ion-checkbox>
            </ion-item>
          </ion-card-content>
        </ion-card>

        <ion-card [class.error-card]="form.controls['opinion'].invalid && (enviado || form.controls['opinion'].dirty)">
          <ion-card-header>
            <ion-card-title>¿Qué opina de la carta?</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-radio-group formControlName="opinion">
              <ion-list>
                <ion-item lines="none">
                  <ion-radio slot="start" value="buena"></ion-radio>
                  <ion-icon name="happy-outline" slot="start" color="success"></ion-icon>
                  <ion-label>Buena</ion-label>
                </ion-item>
                <ion-item lines="none">
                  <ion-radio slot="start" value="regular"></ion-radio>
                  <ion-icon name="help-outline" slot="start" color="warning"></ion-icon>
                  <ion-label>Regular</ion-label>
                </ion-item>
                <ion-item lines="none">
                  <ion-radio slot="start" value="mala"></ion-radio>
                  <ion-icon name="sad-outline" slot="start" color="danger"></ion-icon>
                  <ion-label>Mala</ion-label>
                </ion-item>
              </ion-list>
            </ion-radio-group>
          </ion-card-content>
        </ion-card>

        <ion-card [class.error-card]="form.controls['quejas'].invalid && (enviado || form.controls['quejas'].dirty)">
          <ion-card-header>
            <ion-card-title style="margin-top:25px;">Quejas sobre el servicio:</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-textarea
              formControlName="quejas" 
              placeholder="Escriba sus quejas aquí..."
              rows="3">
            </ion-textarea>
          </ion-card-content>
        </ion-card>

        <ion-card>
          <ion-card-header>
            <ion-card-title>Agregar fotos (1-3)</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <input type="file" (change)="onFileSelected($event)" multiple accept="image/*" />
            <div *ngIf="fotos.length > 0">
              <ion-row>
                <ion-col size="4" *ngFor="let foto of fotos">
                  <ion-img [src]="foto" class="uploaded-image"></ion-img>
                </ion-col>
              </ion-row>
            </div>
          </ion-card-content>
        </ion-card>

      </ion-row>
    </form>

    <ion-row class="ion-justify-content-center slot aux">
      <ion-row class="ion-justify-content-center btn">
        <ion-button expand="full" shape="round" size="large" (click)="registrarEncuesta()">Registrar encuesta</ion-button>
      </ion-row>
    </ion-row>

  </ion-row>
</ion-content>